import{_ as T,r as V,t as L,w as S,o as C,c as R,b as t,d as c,e as a,a as I,u as Q,f as i,g as q,h as l,i as z,j as B,p as E,k as K,l as N,n as j,m as M}from"./index.669d45b8.js";const O=d=>(E("data-v-ecf9d7f2"),d=d(),K(),d),D={class:"login-container"},$=O(()=>l("div",{class:"title-container"},[l("h3",{class:"title"},"Login Form")],-1)),A={class:"svg-container"},G={class:"svg-container"},H=N("Login"),J={__name:"index",setup(d){const o=V({refLoginForm:null,refUsername:null,refPassword:null,loginForm:{username:"admin",password:"123456789"},loginRules:{username:[{required:!0,trigger:"blur",validator:(r,e,n)=>{e?n():n(new Error("Please enter the correct user name"))}}],password:[{required:!0,trigger:"blur",validator:(r,e,n)=>{e.length<6?n(new Error("The password can not be less than 6 digits")):n()}}]},passwordType:"password",loading:!1,showDialog:!1,redirect:void 0,otherQuery:{}}),{refLoginForm:_,refUsername:w,refPassword:x,loginForm:s,loginRules:h,passwordType:u,loading:v}=L(o),b=r=>Object.keys(r).reduce((e,n)=>(n!=="redirect"&&(e[n]=r[n]),e),{}),y=I(),k=Q();S(()=>k.path,r=>{const{query:e}=r;e&&(o.redirect=e.redirect,o.otherQuery=b(e))});const F=()=>{o.passwordType==="password"?o.passwordType="":o.passwordType="password",j(()=>{o.refPassword.focus()})},f=()=>{o.refLoginForm.validate(r=>{if(r)o.loading=!0,M().login(o.loginForm),o.loading=!1,y.push({path:o.redirect||"/",query:o.otherQuery});else return console.log("error submit!!"),!1})};return C(()=>{o.loginForm.username===""?o.refUsername.focus():o.loginForm.password===""&&o.refPassword.focus()}),(r,e)=>{const n=i("svg-icon"),m=i("el-input"),g=i("el-form-item"),U=i("el-button"),P=i("el-form");return q(),R("div",D,[t(P,{ref_key:"refLoginForm",ref:_,model:a(s),rules:a(h),class:"login-form",autocomplete:"on","label-position":"left"},{default:c(()=>[$,t(g,{prop:"username"},{default:c(()=>[l("span",A,[t(n,{name:"user"})]),t(m,{ref_key:"refUsername",ref:w,modelValue:a(s).username,"onUpdate:modelValue":e[0]||(e[0]=p=>a(s).username=p),placeholder:"Username",name:"username",type:"text",tabindex:"1",autocomplete:"on"},null,8,["modelValue"])]),_:1}),t(g,{prop:"password"},{default:c(()=>[l("span",G,[t(n,{name:"password"})]),t(m,{ref_key:"refPassword",ref:x,modelValue:a(s).password,"onUpdate:modelValue":e[1]||(e[1]=p=>a(s).password=p),type:a(u),placeholder:"Password",name:"password",tabindex:"2",autocomplete:"on",onKeyup:z(f,["enter","native"])},null,8,["modelValue","type","onKeyup"]),l("span",{class:"show-pwd",onClick:e[2]||(e[2]=p=>F())},[t(n,{name:a(u)==="password"?"eye":"eye-open"},null,8,["name"])])]),_:1}),t(U,{loading:a(v),type:"primary",style:{width:"100%","margin-bottom":"30px"},onClick:B(f,["prevent"])},{default:c(()=>[H]),_:1},8,["loading","onClick"])]),_:1},8,["model","rules"])])}}};var Z=T(J,[["__scopeId","data-v-ecf9d7f2"]]);export{Z as default};
